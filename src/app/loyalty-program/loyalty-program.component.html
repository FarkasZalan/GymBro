<div class="loyalty-dashboard">
    <div class="loyalty-header">
        <h2>
            <nb-icon icon="award-outline"></nb-icon>
            {{ 'loyaltyProgram.title' | translate }}
        </h2>
        <p class="loyalty-subtitle">{{ 'loyaltyProgram.subtitle' | translate }}</p>
        <p class="loyalty-intro">{{ 'loyaltyProgram.intro' | translate }}</p>
    </div>

    <div class="points-overview">
        <div class="current-points">
            <div class="points-circle">
                <span class="points-number">{{currentPoints}}</span>
                <span class="points-label">{{ 'loyaltyProgram.pointsOverview.totalPoints' | translate }}</span>
            </div>
        </div>
        <div class="points-stats">
            <div class="stat-item">
                <nb-icon icon="trending-up-outline"></nb-icon>
                <div class="stat-content">
                    <span class="stat-label">{{ 'loyaltyProgram.pointsOverview.earnedThisMonth' | translate }}</span>
                    <span class="stat-value">+{{pointsEarnedThisMonth}}</span>
                </div>
            </div>
            <div class="stat-item">
                <nb-icon icon="gift-outline"></nb-icon>
                <div class="stat-content">
                    <span class="stat-label">{{ 'loyaltyProgram.pointsOverview.rewardsRedeemed' | translate }}</span>
                    <span class="stat-value">{{rewardsRedeemed}}</span>
                </div>
            </div>
        </div>
    </div>

    <div class="rewards-section">
        <h3>{{ 'loyaltyProgram.rewardsSection.title' | translate }}</h3>
        <div class="rewards-grid">
            <div *ngFor="let reward of availableRewards" class="reward-card"
                [class.locked]="currentPoints < reward.pointsRequired">
                <div class="reward-icon">
                    <nb-icon [icon]="reward.icon"></nb-icon>
                </div>
                <div class="reward-details">
                    <h4>{{reward.nameKey | translate}}</h4>
                    <p>{{reward.descriptionKey | translate}}</p>
                    <div class="points-required">
                        <span>{{reward.pointsRequired}} {{ 'loyaltyProgram.pointsOverview.points' | translate }}</span>
                        <button nbButton status="primary" [disabled]="currentPoints < reward.pointsRequired"
                            (click)="redeemReward(reward)">
                            {{ 'loyaltyProgram.rewardsSection.redeem' | translate }}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>